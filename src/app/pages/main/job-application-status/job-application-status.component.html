<div class="job-postings-container">
  <div class="header-section">
    <h1 class="page-title">Job Postings Management</h1>
    <p class="page-subtitle">Track and manage all active job postings</p>
  </div>

  <mat-accordion class="job-accordion">
    @for(job of paginatedJobs; track job.id) {
    <mat-expansion-panel class="job-panel">
      <mat-expansion-panel-header class="job-panel-header">
        <mat-panel-title class="job-header-title">
          <div class="job-header-layout">
            <!-- Left: Job Title and Meta -->
            <div class="job-left-section">
              <h3 class="job-title-text">{{ job.title }}</h3>
              <div class="job-meta-info">
                <span class="meta-item">
                  <mat-icon class="meta-icon">business</mat-icon>
                  {{ job.company }}
                </span>
                <span class="meta-item">
                  <mat-icon class="meta-icon">location_on</mat-icon>
                  {{ job.location }}
                </span>
                <span class="job-type-badge">{{ job.type }}</span>
              </div>
            </div>

            <!-- Right: Status and Stats -->
            <div class="job-right-section">
              <div class="status-badge" [ngClass]="getStatusClass(job.status)">
                {{
                  job.status === "In Progress"
                    ? "IN PROGRESS"
                    : job.status.toUpperCase()
                }}
              </div>
              <div class="job-stats-grid">
                <div class="stat-column">
                  <span class="stat-label">SALARY</span>
                  <span class="stat-value">{{ job.salary }}</span>
                </div>
                <div class="stat-column">
                  <span class="stat-label">APPLICANTS</span>
                  <span class="stat-value">{{ job.applicants }}</span>
                </div>
                <div class="stat-column">
                  <span class="stat-label">POSTED</span>
                  <span class="stat-value">{{ job.posted }}</span>
                </div>
              </div>
            </div>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="panel-content">
        <mat-card class="cardWithShadow activity-card">
          <mat-card-content>
            <mat-card-title>Daily activities</mat-card-title>
            <div class="timeline m-t-24">
              @for(stat of job.stats; track stat.id) {
              <div class="timeline-item d-flex overflow-hidden">
                <div class="time text-right mat-subtitle-1 f-s-14">
                  {{ stat.time }}
                </div>
                <div class="point d-flex align-items-center">
                  <span class="timeline-badge bg-{{ stat.color }} m-y-8"></span>
                  <span class="timline-border d-block"></span>
                </div>
                <div class="desc">
                  @if(stat.subtext) {
                  <span class="mat-subtitle-1 f-s-14 lh-20">{{
                    stat.subtext
                  }}</span>
                  } @if(stat.title) {
                  <span class="mat-subtitle-1 f-s-14 lh-20 f-w-600 d-block">{{
                    stat.title
                  }}</span>
                  } @if(stat.link) {
                  <a
                    href="#"
                    class="text-primary text-decoration-none mat-body-1"
                    >#ML-3467</a
                  >
                  }
                </div>
              </div>
              }
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-expansion-panel>
    }
  </mat-accordion>

  <mat-paginator
    [length]="jobs.length"
    [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions"
    [pageIndex]="pageIndex"
    (page)="onPageChange($event)"
    showFirstLastButtons
    class="job-paginator"
  >
  </mat-paginator>
</div>
